<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/layout.html :: base('Nuovo Orologio - WatchLux', ~{::contenuto})">
<head>
    <title>⌚ Nuovo Orologio - WatchLux</title>
</head>
<body>
    <!-- Contenuto specifico del form -->
    <div th:fragment="contenuto">
        <section class="form-container">
            <div class="form-wrapper">
                <h1 class="form-title">
                    <i class="material-icons">watch</i>
                    Aggiungi Nuovo Orologio
                </h1>
                
                <form th:action="@{/watch}" method="POST" th:object="${watch}" class="luxury-form">
                    
                    <!-- Errori Globali - DENTRO IL FORM CON CSRF TOKEN -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    
                    <div th:if="${#fields.hasGlobalErrors()}">
					    <p th:each="err : ${#fields.globalErrors()}" th:text="${err}" style="color: #dc2626; font-weight: 600; margin-bottom: 1rem;">...</p> 
					</div>
                    
                    <!-- Nome -->
                    <div class="form-group">
                        <label for="name" class="form-label">
                            <i class="material-icons">title</i>
                            Nome Orologio
                        </label>
                        <input type="text" 
                               id="name"
                               th:field="*{name}" 
                               class="form-input"
                               placeholder="es. Submariner Date"
                               required>
                        <span class="error-text" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
                    </div>
                    
                    <!-- Brand -->
                    <div class="form-group">
                        <label for="brand" class="form-label">
                            <i class="material-icons">business</i>
                            Marca
                        </label>
                        <input type="text" 
                               id="brand"
                               th:field="*{brand}" 
                               class="form-input"
                               placeholder="es. Rolex"
                               required>
                        <span class="error-text" th:if="${#fields.hasErrors('brand')}" th:errors="*{brand}"></span>
                    </div>
                    
                    <!-- Anno -->
                    <div class="form-group">
                        <label for="year" class="form-label">
                            <i class="material-icons">calendar_today</i>
                            Anno di Produzione
                        </label>
                        <input required type="number" 
                               th:field="*{year}" 
                               class="form-input">
                        <span class="error-text" th:if="${#fields.hasErrors('year')}" th:errors="*{year}"></span>
                    </div>
                    
                    <!-- Prezzo -->
                    <div class="form-group">
                        <label for="price" class="form-label">
                            <i class="material-icons">euro</i>
                            Prezzo (€)
                        </label>
                        <input required type="number" 
                               th:field="*{price}" 
                               class="form-input"
                               placeholder="es. 8500.00">
                        <span class="error-text" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></span>
                    </div>
                    
                    <!-- Bottoni -->
                    <div class="form-actions">
                        <a th:href="@{/}" class="btn-secondary">
                            <i class="material-icons">arrow_back</i>
                            Annulla
                        </a>
                        <button type="submit" class="btn-primary">
                            <i class="material-icons">add</i>
                            Aggiungi Orologio
                        </button>
                    </div>
                </form>
            </div>
        </section>
    </div>
</body>
</html>