<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout.html :: base('Dettaglio Ordine - WatchLux', ~{::contenuto})}">
<head>
    <title>Dettaglio Ordine - WatchLux</title>
</head>
<body>
    <div th:fragment="contenuto">
        <div class="order-detail-container">
            
            <!-- Header dell'ordine -->
            <div class="order-detail-header">
                <h1>üìã Ordine <span th:text="${order.code}">ORD-001</span></h1>
                <div class="order-meta">
                    <div class="meta-card">
                        <div class="meta-card-label">Data Ordine</div>
                        <div class="meta-card-value" th:if="${order.creationTime}">
                            üìÖ <span th:text="${#temporals.format(order.creationTime, 'dd/MM/yyyy HH:mm')}">14/07/2025 18:24</span>
                        </div>
                    </div>
                    <div class="meta-card">
                        <div class="meta-card-label">Stato</div>
                        <div class="meta-card-value">‚úÖ Completato</div>
                    </div>
                </div>
            </div>

            <!-- Articoli ordinati -->
            <div class="order-items">
                <h2 class="section-title">üõçÔ∏è Articoli Ordinati</h2>
                
                <!-- Nessun articolo -->
                <div th:if="${#lists.isEmpty(orderLines)}" class="order-items-empty">
                    <div class="empty-icon">üì¶</div>
                    <p>Non ci sono articoli in questo ordine</p>
                </div>
                
                <!-- Lista articoli -->
                <div th:if="${!#lists.isEmpty(orderLines)}" class="order-items-list">
                    <div th:each="orderLine : ${orderLines}" class="order-item">
                        
                        <!-- Immagine prodotto -->
                        <div class="order-item-image">‚åö</div>
                        
                        <!-- Dettagli prodotto -->
                        <div class="order-item-details">
                            <h3 class="order-item-name">
                                <a th:href="@{'/watch/' + ${orderLine.watch.id}}" 
                                   th:text="${orderLine.watch.name}">
                                    Nome Orologio
                                </a>
                            </h3>
                            
                            <div th:if="${orderLine.watch.brand}" class="order-item-brand">
                                üè¢ <span th:text="${orderLine.watch.brand}">Marca</span>
                            </div>
                            
                            <div class="order-item-quantity">
                                üì¶ Quantit√†: <span th:text="${orderLine.quantity}">1</span>
                            </div>
                        </div>
                        
                        <!-- Prezzo -->
                        <div class="order-item-price">
                            <div class="order-item-unit-price">
                                ‚Ç¨<span th:text="${#numbers.formatDecimal(orderLine.watch.price, 0, 'COMMA', 2, 'POINT')}">0,00</span> cad.
                            </div>
                            <div class="order-item-total-price">
                                ‚Ç¨<span th:text="${#numbers.formatDecimal(orderLine.watch.price * orderLine.quantity, 0, 'COMMA', 2, 'POINT')}">0,00</span>
                            </div>
                        </div>
                        
                        <!-- Azione -->
                        <div class="order-item-action">
                            <a th:href="@{'/watch/' + ${orderLine.watch.id}}" class="btn-view-product">
                                üëÅÔ∏è Vedi
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Riepilogo -->
            <div class="order-summary">
                <h3>üìã Riepilogo Ordine</h3>
                <div class="summary-row">
                    <span>Codice Ordine:</span>
                    <span class="summary-value bold" th:text="${order.code}">ORD-001</span>
                </div>
                <div class="summary-row">
                    <span>Subtotale:</span>
                    <span class="summary-value">‚Ç¨<span th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 2, 'POINT')}">0,00</span></span>
                </div>
                
                <div class="summary-row">
                    <span>IVA (22%):</span>
                    <span class="summary-value">Inclusa</span>
                </div>
                <div class="summary-row total">
                    <span>Totale:</span>
                    <span class="summary-value">
                        ‚Ç¨<span th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 2, 'POINT')}">0,00</span>
                    </span>
                </div>
            </div>
            
            <!-- Azioni -->
            <div class="order-actions">
                
                
                <a th:href="@{/orders}" class="btn btn-primary">
                    üìã Tutti gli Ordini
                </a>
                
            </div>
            
        </div>
    </div>
</body>
</html>