<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Header Fragment - VERSIONE STILI INLINE SENZA JS -->
    <header th:fragment="intestazione">
        
        <div style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 1rem 0; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <div style="max-width: 1400px; margin: 0 auto; padding: 0 2rem; display: flex; align-items: center; justify-content: space-between; gap: 2rem;">
                
                <!-- Logo -->
                <div>
                    <a th:href="@{/}" style="display: flex; align-items: center; gap: 0.75rem; color: white; text-decoration: none; font-size: 1.5rem; font-weight: 700;">
                        <span style="font-size: 2rem;">⌚</span>
                        <span>WatchLux</span>
                    </a>
                </div>
                
                <!-- Search -->
                <div style="flex: 1; max-width: 500px; margin: 0 2rem;">
                    <form th:action="@{/watches}" method="GET" style="display: flex; background: white; border-radius: 50px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <input type="text" 
                               name="search" 
                               placeholder="Cerca orologi, marche, modelli..."
                               th:value="${searchQuery}"
                               style="flex: 1; padding: 0.875rem 1.5rem; border: none; outline: none; font-size: 1rem;">
                        <button type="submit" style="background: #fbbf24; color: #1f2937; border: none; padding: 0.875rem 1.25rem; cursor: pointer;">
                            🔍
                        </button>
                    </form>
                </div>
                
                <!-- Icons - STILI INLINE SENZA JS -->
                <div style="display: flex; gap: 1.5rem; align-items: center;">
                    
                    <!-- Home -->
                    <a th:href="@{/}" style="display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; background: transparent; border-radius: 8px; text-decoration: none;">
                        <img th:src="@{images/icons/home-icon.png}" alt="Home" style="width: 40px; height: 40px; filter: invert(1);">
                    </a>
                    
                    <!-- Lingua -->
                    <div style="position: relative; display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; background: transparent; border-radius: 8px; font-size: 1.5rem; cursor: pointer;">
                        🇮🇹
                        
                        <!-- Dropdown menu -->
                        <div style="position: absolute; top: 100%; right: 0; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); min-width: 150px; z-index: 1000; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s ease; margin-top: 0.5rem;">
                            <a th:href="@{/lang/it}" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; text-decoration: none; color: #374151; border-bottom: 1px solid #f3f4f6; transition: background 0.2s;">
                                <span>🇮🇹</span>
                                <span style="font-weight: 500;">Italiano</span>
                            </a>
                            <a th:href="@{/lang/en}" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; text-decoration: none; color: #374151; border-bottom: 1px solid #f3f4f6; transition: background 0.2s;">
                                <span>🇬🇧</span>
                                <span style="font-weight: 500;">English</span>
                            </a>
                            <a th:href="@{/lang/fr}" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; text-decoration: none; color: #374151; border-bottom: 1px solid #f3f4f6; transition: background 0.2s;">
                                <span>🇫🇷</span>
                                <span style="font-weight: 500;">Français</span>
                            </a>
                            <a th:href="@{/lang/de}" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; text-decoration: none; color: #374151; transition: background 0.2s;">
                                <span>🇩🇪</span>
                                <span style="font-weight: 500;">Deutsch</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Profilo -->
                    <a th:href="${isAuthenticated} ? '/profile' : '/login'" style="position: relative; display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; background: transparent; border-radius: 8px; text-decoration: none;">
                        <img th:src="@{images/icons/profile-icon.png}" alt="Profilo" style="width: 40px; height: 40px; filter: invert(1);">
                        <span th:if="${isAuthenticated}" style="position: absolute; top: -2px; right: -2px; width: 12px; height: 12px; background: #10b981; border-radius: 50%; border: 2px solid white;"></span>
                    </a>
                    
                    <!-- Carrello -->
                    <a th:href="@{/currentOrder}" style="position: relative; display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; background: transparent; border-radius: 8px; text-decoration: none;">
                        <img th:src="@{images/icons/cart-icon.png}" alt="Carrello" style="width: 40px; height: 40px; filter: invert(1);">
                        <span th:if="${cartItemCount > 0}" th:text="${cartItemCount}" style="position: absolute; top: -6px; right: -6px; background: #ef4444; color: white; border-radius: 50%; min-width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600; border: 1px solid white;"></span>
                    </a>
                    
                </div>
            </div>
        </div>
        
        <style>
            /* Hover per il dropdown lingue - CSS puro senza JavaScript */
            div[style*="cursor: pointer"]:hover > div {
                opacity: 1 !important;
                visibility: visible !important;
                transform: translateY(0) !important;
            }
            
            /* Hover sui link del dropdown */
            div[style*="cursor: pointer"] a:hover {
                background: #f8fafc !important;
            }
        </style>
        
    </header>
</body>
</html>